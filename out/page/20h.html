<!DOCTYPE html><html><head><meta charset="utf-8"><title>&quot;**Transclusion / Template s...&quot;</title><link rel="stylesheet" type="text/css" href="../common.css"><link rel="stylesheet" type="text/css" href="../page-style.css"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  SVG: {EqnChunk: 50, EqnChunkFactor: 1.5, EqChunkDelay: 10, useFontCache: false, linebreaks: {automatic: true}},
  tex2jax: {
    inlineMath: [['$~$', '$~$']],
    displayMath: [['$$~$', '$~$$']],
    processEscapes: true,
    preview: 'none',
  },
  showProcessingMessages: false,
  messageStyle: 'none',
  // http://docs.mathjax.org/en/latest/config-files.html#the-tex-ams-svg-configuration-file
  jax: ["input/TeX","output/SVG", "output/PreviewHTML"],
  extensions: ["tex2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
  TeX: { extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"] }
});</script><script type="text/javascript" src="../MathJax-2.7.5/MathJax.js"></script><script type="text/javascript" src="../arbital-demo-bundle.js"></script><script type="text/javascript">window.addEventListener('DOMContentLoaded', e=>window.loadAllDemos())
</script></head><body><header><h1 class="title">&quot;**Transclusion / Template s...&quot;</h1><div class="page-info"><p class="metadata-link"><a href="../metadata/20h.json.html">20h.json</a></p><p class="arbital-url"><a href="https://arbital.com/p/20h">https://arbital.com/p/20h</a></p><p class="creator">by
 <a class="page-link" href="../page/EricBruylant.html">Eric Bruylant</a> Feb 16 2016</p></div><nav class="breadcrumbs"><nav class="breadcrumb" aria-label="Breadcrumb"><ul><li><a href="../index.html">Index</a></li><li>&quot;**Transclusion / Template s...&quot;</li></ul></nav><nav class="breadcrumb" aria-label="Breadcrumb"><ul><li><a href="Arbital.html">Arbital</a></li><li><a href="arbital_community_input.html">Arbital community input</a></li><li>â€¦</li></ul></nav></nav></header><hr><main><p><strong>Transclusion / Template system</strong></p>
<p><a href="https://www.mediawiki.org/wiki/Help:Templates">Templates</a> and <a href="https://en.wikipedia.org/wiki/Wikipedia:Lua">Scribunto</a> power most of the strucured information across Wikimedia (exception: <a href="https://www.wikidata.org/wiki/Wikidata:Main_Page">Wikidata</a>), most notably the infoboxes, links to related pages, and notice templates, but also a huge number of other specific functions. They are an incredibly flexible tool which makes it possible for users to create and maintain things that would never be done if each page had to be updated by hand, and hides complexity from less technical users who can easily include them in pages by copying existing examples.</p>
<p>This is not an easy feature to get right, but something which fills their function is essential to attract editors from any existing mediawiki wiki.</p>
<p>MW started off with basic transclusion+parameters, then added various <a href="https://meta.wikimedia.org/wiki/Help:Parser_function">parser functions</a> in a way which turned out to be ugly and inefficient to the point where they were forced to add (limited) lua scripting.</p>
<p>(WIP, will come back to this with more thoughts)</p></main><hr><section class="comments"><h2>Comments</h2><div class="comment"><p><a class="page-link" href="../page/EricBruylant.html">Eric Bruylant</a></p><p><p>Seems like there's main two parts:</p>
<p><strong>How do we make it intuitive for editors</strong></p>
<p>Displaying template parameters in the text <a href="https://en.wikipedia.org/wiki/London?action=edit">scales badly</a>, is not a natural way of entering information, and generally scares away editors. My current best idea for solving this is copying <a href="https://en.wikipedia.org/wiki/Cat?veaction=edit">TemplateData's method</a> (click on the infobox template, it lets you open a form to edit template parameters), but have the template call code highlighted in source editor (<img src="https://i.imgur.com/9g2kWcp.png" alt="highlight" />), and make clicking that bring up a form to edit the parameters.</p>
<p>A bonus is storing the parameters separately makes it much easier to reuse the structured information.</p>
<p><strong>What features does it need to be handle the major use cases</strong></p>
<p>Essential:</p>
<ul>
<li>Single layer transclusion</li>
<li><a href="https://www.mediawiki.org/wiki/Help:Templates#Parameters">Template parameters</a></li>
</ul>
<p>Important</p>
<ul>
<li>A way to conditionally hide parts of a template when a variable is not present.</li>
<li>Possibly via a basic <a href="https://www.mediawiki.org/wiki/Help:Extension:ParserFunctions">parser function</a> for IF?</li>
<li>Possibly by using the syntax for parameters so it's easy to specify which parts should only be shown if the parameter is included?</li>
<li>Core <a href="https://www.mediawiki.org/wiki/Help:Magic_words">magic words</a></li>
<li>PAGENAME, PARENTS, CHILDREN, DOMAIN, some time/date ones?</li>
</ul>
<p>Would be good:</p>
<ul>
<li>Multi layer transclusion</li>
<li>Not certain about this, but not having it probably causes more problems than having it.</li>
<li>More flexible scripting for complex templates</li>
<li>The only really good implementation I know of is <a href="https://en.wikipedia.org/wiki/Wikipedia:Lua">Scribunto</a></li>
<li>MW got by with parser functions for a while. It worked, but it was ugly and terrible. Maybe a with some thought a parser function like solution could be made less bad.</li>
<li>A wider collection of <a href="https://www.mediawiki.org/wiki/Help:Magic_words">magic words</a></li>
</ul>
<p>Wishlist:</p>
<ul>
<li>Use the structured data stored in templates to improve search</li>
<li>Allow in-page display of structured data, like <a href="https://www.semantic-mediawiki.org/wiki/Help:Inline_queries">SMW's Inline Queries</a></li>
</ul></p></div><div class="comment"><p><a class="page-link" href="../page/EricBruylant.html">Eric Bruylant</a></p><p><p>(This part was written first, but the conclusion/outline seemed more valuable than this background thought) I realized why I'm struggling to come up with good ideas for this one: I only really know much about MW's system.</p>
<p>So, did a bit of research into how it's done on other software. They mostly do similar things, and all major wiki software includes some form of templating, but many have different takes on the core idea (e.g. <a href="https://www.youtube.com/watch?v=WaUVBnxJJkY">Cofluence</a> is clearly optimized for non-technical users).</p>
<p>Misc thoughts/findings:</p>
<ul>
<li>Some wikis have non-global templates.</li>
<li>This seems mostly bad. It would allow short domain specific templates, but having the same text display differently seems like a much worse problem</li>
<li>However, it does bring up the question of how to handle templates between subdomains. Probably allow templates from the main arbital repository to be called from private groups, with slightly different syntax (a ! at the start of the name or something)?</li>
<li>Templates are generally stored separately from pages, but often use the same edit interface.</li>
<li>Most wikis allow multiple layers of transclusion.</li>
<li>This can be very useful for maintaining consistency and ease of template creation, but can also lead to unreadable mazes with 8 layers of template which are inefficient to unpack every time a page is served (MW gets around this through extensive caching).</li>
<li><ul>
<li>There are several different attempts to make templates more user friendly. The main approach is having a flexible form which allows you to input variables, rather than doing it directly as text.</li></ul></li>
<li>The variables are usually stored in page text, but they could be stored separately.</li>
<li>In text has the advantage of being editable from the normal edit window, but the disadvantage of having a lot of scary visual clutter at the top of edit windows (a lot of users would get put off by <a href="https://en.wikipedia.org/w/index.php?title=London&action=edit">this</a>, for example).</li>
<li>Separately has the advantage of having structured information stored in a form which invites complex searching and analysis, and would work by having templates show up differently in the edit window, with the option to click on them to edit their variables via popup form.</li>
<li>I suspect separate storage is significantly better, but requires extra UI work. Wikimedia's use of <a href="https://www.wikidata.org/wiki/Wikidata:Introduction">Wikidata</a> rather than adoption of <a href="https://www.semantic-mediawiki.org/wiki/Help:Introduction_to_Semantic_MediaWiki">SMW</a> and their creation of the <a href="https://www.mediawiki.org/wiki/Extension:TemplateData">TemplateData</a> extension both feel like attempts at approximating the advantages of it, patching over a bad design decision which got baked in.</li>
</ul>
<p>Some other links:</p>
<ul>
<li><a href="https://wikiapiary.com/w/index.php?title=Effective_Altruism_Wiki&action=formedit">An advanced example of Semantic Mediawiki's edit with form</a> (<a href="https://wikiapiary.com/w/index.php?title=Form:Website&action=edit">form definition</a>).</li>
<li><a href="https://wikiapiary.com/w/index.php?title=Farm:Wikimedia&action=formedit">Basic SMW form</a> (<a href="https://wikiapiary.com/w/index.php?title=Form:Farm&action=edit">form definition</a>)</li>
<li><a href="https://phabricator.wikimedia.org/T8455">An informative discussion about whether Wikimedia should add StringFunctions</a></li>
<li><a href="http://foswiki.org/System/TemplateTopics">FOSS Wiki Template docs</a></li>
<li><a href="https://www.xwiki.org/xwiki/bin/view/FAQ/How+can+I+create+a+new+page+based+on+a+form">XWiki</a> <a href="https://www.xwiki.org/xwiki/bin/view/FAQ/How+can+I+create+a+new+page+based+on+a+form">Docs</a></li>
</ul></p></div></section><footer><p class="likes"><h2>Likes</h2><span class="page-comma-list"><a class="page-link" href="../page/AlexeiAndreev.html">Alexei Andreev</a>,
 <a class="page-link" href="../page/JeremyPerret.html">Jeremy Perret</a>,
 <a class="page-link" href="../page/MYass.html">M Yass</a></span></p></footer></body></html>