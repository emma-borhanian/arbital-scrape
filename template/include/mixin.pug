mixin breadcrumb(...links)
  nav.breadcrumb(aria-label='Breadcrumb')
    ul
      li: a(href=`${root}index.html`) Index
      - for (let i=0; i < links.length; i+=2)
        if i+1 < links.length
          li: a(href=links[i])= links[i+1]
        else
          li= links[i]

mixin pageLink(pageOrAliasOrId)
  if typeof(pageOrAliasOrId) != 'string'
    a.page-link(href=`${root}page/${pageOrAliasOrId.aliasOrId}.html`)= pageOrAliasOrId.name
  else if pageIndex[pageOrAliasOrId]
    +pageLink(pageIndex[pageOrAliasOrId])
  else
    = pageOrAliasOrId
    | 
    | (missing)

mixin pageTree(pages)
  - pages = Array.from(pages).map(p=>pageIndex[p]||p)
  - pages = lib.sortBy(pages, p=>typeof(p)=='string'?p:p.name)
  ul.page-tree
    each page in pages
      li
        +pageLink(page)
        if typeof(page) != 'string' && page.childIds.length > 0
          +pageTree(page.childIds)
